Javaå¤šçº¿ç¨‹
------------

[ã€ç‹‚ç¥è¯´Javaã€‘å¤šçº¿ç¨‹è¯¦è§£](https://www.bilibili.com/video/BV1V4411p7EF?spm_id_from=333.999.0.0)



## ä¸€ã€çº¿ç¨‹ç®€ä»‹

ä»»åŠ¡ã€è¿›ç¨‹ã€çº¿ç¨‹ã€å¤šçº¿ç¨‹

å¤šä»»åŠ¡

å¤šçº¿ç¨‹ 

### æ™®é€šæ–¹æ³•è°ƒç”¨å’Œå¤šçº¿ç¨‹

![](../../images/java-067.jpg)

### ç¨‹åº-è¿›ç¨‹-çº¿ç¨‹

Process Thread

 

### æœ¬ç« æ ¸å¿ƒæ¦‚å¿µ

- çº¿ç¨‹å°±æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œè·¯å¾„ï¼›
- åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå³ä½¿æ²¡æœ‰è‡ªå·±åˆ›å»ºçº¿ç¨‹ï¼Œåå°ä¹Ÿä¼šæœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå¦‚<u>ä¸»çº¿ç¨‹ï¼Œgcçº¿ç¨‹</u>ï¼› 
- main()ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹ï¼Œä¸ºç³»ç»Ÿçš„å…¥å£ï¼Œç”¨äºæ‰§è¡Œæ•´ä¸ªç¨‹åºï¼›
- åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¦‚æœå¼€è¾Ÿäº†å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹çš„è¿è¡Œç”±è°ƒåº¦å™¨å®‰æ’è°ƒåº¦ï¼Œè°ƒåº¦å™¨æ˜¯ä¸æ“ä½œç³»ç»Ÿç´§å¯†ç›¸å…³çš„ï¼Œå…ˆåé¡ºåºæ˜¯ä¸èƒ½äººä¸ºçš„å¹²é¢„çš„ã€‚
- å¯¹åŒä¸€ä»½èµ„æºæ“ä½œæ—¶ï¼Œä¼šå­˜åœ¨èµ„æºæŠ¢å¤ºçš„é—®é¢˜ï¼Œéœ€è¦åŠ å…¥**å¹¶å‘æ§åˆ¶**ï¼›
- çº¿ç¨‹ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œå¦‚**cpuè°ƒåº¦æ—¶é—´ï¼Œå¹¶å‘æ§åˆ¶å¼€é”€**ã€‚
- æ¯ä¸ªçº¿ç¨‹åœ¨è‡ªå·±çš„**å·¥ä½œå†…å­˜**äº¤äº’ï¼Œå†…å­˜æ§åˆ¶ä¸å½“ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´



> æ³¨æ„ï¼šå¾ˆå¤šçº¿ç¨‹éƒ½æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼ŒçœŸæ­£çš„å¤šçº¿ç¨‹æ˜¯æŒ‡ç”±å¤šä¸ªCPUï¼Œå³å¤šæ ¸ï¼Œå¦‚æœåŠ¡å™¨ã€‚å¦‚æœæ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„å¤šçº¿ç¨‹ï¼Œå³åœ¨ä¸€ä¸ªcpuçš„æƒ…å†µä¸‹ï¼Œ**åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œcpuåªèƒ½æ‰§è¡Œä¸€ä¸ªä»£ç **ï¼Œå› ä¸ºåˆ‡æ¢çš„å¾ˆå¿«ï¼Œæ‰€ä»¥å°±æœ‰åŒæ—¶æ‰§è¡Œçš„é”™å±€ã€‚





## äºŒã€çº¿ç¨‹å®ç°ã€é‡ç‚¹ã€‘

### ä¸‰ç§åˆ›å»ºæ–¹å¼

![](../../images/java-068.jpg)



### Thread

æ­¥éª¤ï¼š

- è‡ªå®šä¹‰çº¿ç¨‹ç±»ç»§æ‰¿**Thread**ç±»
- é‡å†™run()æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“
- åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹

```java
public class TestThread1 extends Thread {

    @Override
    public void run() {
        // çº¿ç¨‹ä½“
        for (int i = 0; i < 20; i++) {
            System.out.println("æˆ‘åœ¨çœ‹ä»£ç =----" + i);
        }
    }

    public static void main(String[] args) {
        // mainçº¿ç¨‹ï¼Œä¸»çº¿ç¨‹

        // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡
        TestThread1 testThread1 = new TestThread1();

        // è°ƒç”¨start()æ–¹æ³•å¼€å¯çº¿ç¨‹
        testThread1.start();

        for (int i = 0; i < 2000; i++) {
            System.out.println("æˆ‘åœ¨å­¦ä¹ å¤šçº¿ç¨‹--" + i);
        }
    }
}
```

çº¿ç¨‹å¼€å¯ä¸ä¸€å®šç«‹å³æ‰§è¡Œï¼Œç”±CPUè°ƒåº¦æ‰§è¡Œã€‚

#### æ¡ˆä¾‹ï¼Œä¸‹è½½å›¾ç‰‡

å…ˆä¸‹è½½Apache Commons IOçš„jarï¼Œç›´æ¥æ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå³å‡»**Add as Library**å°±å¯ä»¥ä½¿ç”¨ã€‚

### å®ç°Runnableæ¥å£

æ­¥éª¤ï¼š

- å®šä¹‰MyRunnableç±»å®ç°Runnableæ¥å£
- å®ç°run()æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“
- åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹

```java
public class TestThread3 implements Runnable {
    @Override
    public void run() {
        // çº¿ç¨‹ä½“
        for (int i = 0; i < 200; i++) {
            System.out.println("Runnableæˆ‘åœ¨çœ‹ä»£ç =----" + i);
        }
    }

    public static void main(String[] args) {
        // åˆ›å»ºRunnableæ¥å£çš„å®ç°ç±»
        TestThread3 testThread3 = new TestThread3();

        // åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œé€šè¿‡çº¿ç¨‹å¯¹è±¡æ¥å¼€å¯æˆ‘ä»¬çš„çº¿ç¨‹ï¼Œä»£ç†
        new Thread(testThread3).start();

        for (int i = 0; i < 1000; i++) {
            System.out.println("Runnableæˆ‘åœ¨å­¦ä¹ å¤šçº¿ç¨‹--" + i);
        }
    }
}
```



### ç»§æ‰¿Threadç±» vs å®ç°Runnableæ¥å£

ç»§æ‰¿Threadç±»ï¼š

- å­ç±»ç»§æ‰¿Threadç±»å…·å¤‡å¤šçº¿ç¨‹èƒ½åŠ›
- å¯åŠ¨çº¿ç¨‹ï¼šå­ç±»å¯¹è±¡.start()
- ä¸å»ºè®®ä½¿ç”¨ï¼šé¿å…OOPå•ç»§æ‰¿å±€é™æ€§

å®ç°Runnableæ¥å£ï¼š

- å®ç°æ¥å£Runnableå…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›

- å¯åŠ¨çº¿ç¨‹ï¼šä¼ å…¥ç›®æ ‡å¯¹è±¡+Threadå¯¹è±¡.start()

- æ¨èä½¿ç”¨ï¼š**é¿å…å•ç»§æ‰¿å±€é™æ€§ï¼Œçµæ´»æ–¹ä¾¿ï¼Œæ–¹ä¾¿åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨**

  ```java
  // ä¸€ä»½èµ„æº
  StartThread4 station = new StartThread4();
  
  // å¤šä¸ªä»£ç†
  new Thread(station, "å°æ˜").start();
  new Thread(station, "è€æ˜¯").start();
  new Thread(station, "å°çº¢").start();
  ```


#### æ¡ˆä¾‹ï¼šä¹°ç«è½¦ç¥¨

å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œåŒä¸€ä¸ªå¯¹è±¡

#### æ¡ˆä¾‹ï¼šé¾Ÿå…”èµ›è·‘-Race



### å®ç°Callableæ¥å£(äº†è§£)

1. å®ç°Callableæ¥å£ï¼Œéœ€è¦è¿”å›å€¼ç±»å‹
2. é‡å†™callæ–¹æ³•ï¼Œéœ€è¦æŠ›å‡ºå¼‚å¸¸
3. åˆ›å»ºç›®æ ‡å¯¹è±¡
4. åˆ›å»ºæ‰§è¡ŒæœåŠ¡ï¼šExecutorService ser = Executors.newFixedThreadPool(1)ï¼› 
5. æäº¤æ‰§è¡Œï¼šFuture<Boolean> result1 = ser.submit(t1)ï¼›
6. è·å–ç»“æœï¼šboolean r1 = result1.get()
7. å…³é—­æœåŠ¡ï¼šser.shutdownNow()ï¼›



callableçš„å¥½å¤„ï¼š

1. å¯ä»¥å®šä¹‰è¿”å›å€¼
2. å¯ä»¥æŠ›å‡ºå¼‚å¸¸

### é™æ€ä»£ç† 

çœŸå®å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦å®ç°åŒä¸€ä¸ªæ¥å£;

ä»£ç†å¯¹è±¡è¦ä»£ç†çœŸå®è§’è‰²;

é™æ€æ­ç†çš„å¥½å¤„ï¼š
 *      ä»£ç†å¯¹è±¡å¯ä»¥åšå¾ˆå¤šçœŸå®å¯¹è±¡åšä¸äº†çš„äº‹
 *      çœŸå®å¯¹è±¡ä¸“æ³¨äºè‡ªå·±çš„äº‹æƒ…

```java
public class StaticProxy {
    public static void main(String[] args) {
        You you = new You();
        WeddingCompany weddingCompany = new WeddingCompany(you);
        weddingCompany.happyMarry();
    }
}

interface Marry {
    void happyMarry();
}

/**
 * çœŸå®è§’è‰²ï¼Œä½ å»ç»“å©š
 */
class You implements Marry {

    @Override
    public void happyMarry() {
        System.out.println("æˆ‘è¦ç»“å©šäº†ï¼Œå¥½å¼€å¿ƒ");
    }
}

/**
 * ä»£ç†è§’è‰²ï¼Œå¸®åŠ©ä½ ç»“å©š
 */
class WeddingCompany implements Marry {

    // ä»£ç†è°ï¼Ÿ --ã€‹ çœŸå®ç›®æ ‡è§’è‰²
    private Marry target;

    public WeddingCompany(Marry target) {
        this.target = target;
    }

    @Override
    public void happyMarry() {
        before();
        this.target.happyMarry(); // è¿™æ˜¯çœŸå®å¯¹è±¡
        after();
    }

    private void after() {
        System.out.println("ç»“å©šä¹‹åæ”¶å°¾æ¬¾");
    }

    private void before() {
        System.out.println("ç»“å©šä¹‹å‰å¸ƒç½®ç°åœº");
    }
}
```



### Lambdaè¡¨è¾¾å¼

- Î»å¸Œè…Šå­—æ¯è¡¨ä¸­æ’åºç¬¬åä¸€ä½çš„å­—æ¯ï¼Œè‹±è¯­åç§°ä¸ºLambda
- é¿å…åŒ¿åå†…éƒ¨ç±»å®šä¹‰è¿‡å¤š
- å¯ä»¥è®©ä»£ç çœ‹èµ·æ¥å¾ˆç®€æ´
- å»æ‰äº†ä¸€å †æ²¡æœ‰æ„ä¹‰çš„ä»£ç ï¼Œç•™ä¸‹æ ¸å¿ƒçš„é€»è¾‘
- å…¶å®è´¨å±äºå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ

**Funtional Interface(å‡½æ•°å¼æ¥å£)**æ˜¯å­¦ä¹ Lambdaè¡¨è¾¾å¼çš„å…³é”®ã€‚

ä»»ä½•æ¥å£ï¼Œå¦‚æœåªåŒ…å«å”¯ä¸€ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚å¯ä»¥é€šè¿‡lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡ã€‚ 

Lambdaè¡¨è¾¾å¼çš„æ¼”åŒ–è¿‡ç¨‹ï¼š

```java
public class TestLambda1 {
    // 3. é™æ€å†…éƒ¨ç±»
    static class Like2 implements ILike {
        @Override
        public void lambda() {
            System.out.println("I like lambda2");
        }
    }

    public static void main(String[] args) {
        ILike like = new Like();
        like.lambda();

        like = new Like2();
        like.lambda();

        // 4. å±€éƒ¨å†…éƒ¨ç±»
        class Like3 implements ILike {
            @Override
            public void lambda() {
                System.out.println("I like lambda3");
            }
        }
        like = new Like3();
        like.lambda();

        // 5. åŒ¿åå†…éƒ¨ç±»ï¼Œæ²¡æœ‰ç±»çš„åç§°ï¼Œå¿…é¡»å€ŸåŠ©æ¥å£æˆ–è€…çˆ¶ç±»
        like = new ILike() {
            @Override
            public void lambda() {
                System.out.println("I like lambda4");
            }
        };
        like.lambda();

        // 6. ç”¨lambdaç®€åŒ–
        like = () -> {
            System.out.println("I like lambda5");
        };
        like.lambda();
    }

}

// 1. å®šä¹‰å‡½æ•°å¼æ¥å£
interface ILike {
    void lambda();
}

// 2. å®ç°ç±»
class Like implements ILike {
    @Override
    public void lambda() {
        System.out.println("I like lambda");
    }
}
```

Lambdaè¡¨ç¤ºçš„ç®€åŒ–ï¼š

```java
public class TestLambda2 {
    public static void main(String[] args) {
        ILove love = null;

        love = (int a) -> {
            System.out.println("I love you -->" + a);
        };

        // ç®€åŒ–1ï¼šå»æ‰å‚æ•°ç±»å‹ï¼Œå¤šä¸ªå‚æ•°ä¹Ÿå¯ä»¥å»æ‰å‚æ•°ç±»å‹
        love = (a) -> {
            System.out.println("I love you -->" + a);
        };

        // ç®€åŒ–2ï¼šå»æ‰æ‹¬å·
        love = a -> {
            System.out.println("I love you -->" + a);
            System.out.println("I love you too.");
        };

        // ç®€åŒ–3ï¼šå»æ‰å¤§æ‹¬å·ï¼ˆå› ä¸ºä»£ç åªæœ‰ä¸€è¡Œï¼‰
        love = a -> System.out.println("I love you -->" + a);

        love.love(520);
    }
}

interface ILove {
    void love(int a);
}
```

æ€»ç»“ï¼š

- å‰ææ˜¯æ¥å£ä¸ºå‡½æ•°å¼æ¥å£
- Lambdaè¡¨ç¤ºåªæœ‰ä¸€è¡Œä»£ç äº‹æ‰èƒ½ç®€åŒ–ä¸ºä¸€è¡Œ
- å¤šä¸ªå‚æ•°ä¹Ÿå¯ä»¥å»æ‰å‚æ•°ç±»å‹ï¼Œè¦å»æ‰å°±éƒ½å»æ‰ï¼Œå¿…é¡»åŠ ä¸Šæ‹¬å·

## ä¸‰ã€çº¿ç¨‹äº”å¤§çŠ¶æ€

![](../../images/java-069.jpg)



![](../../images/java-070.jpg)



### çº¿ç¨‹æ–¹æ³•



| æ–¹æ³•                           | è¯´æ˜                                       |
| ------------------------------ | ------------------------------------------ |
| setPriority(int newPriority)   | æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§                           |
| static void sleep(long millis) | åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ    |
| void join()                    | ç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢                             |
| static void yield()            | æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä»–çº¿ç¨‹ |
| void interrupt()               | ä¸­æ–­çº¿ç¨‹(ä¸å»ºè®®ä½¿ç”¨)                       |
| boolean isAlive()              | æµ‹è¯•çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€                   |

### åœæ­¢çº¿ç¨‹

- ä¸æ¨èä½¿ç”¨JDKæä¾›çš„stop()ã€destroy()ï¼ˆå·²åºŸå¼ƒï¼‰
- å»ºè®®æ§åˆ¶çº¿ç¨‹è‡ªå·±åœæ­¢ä¸‹æ¥ï¼Œä½¿ç”¨ä¸€ä¸ªæ ‡å¿—ä½

```java
public class TestStop implements Runnable{

    private boolean flag = true;
    @Override
    public void run() {
        int i = 0;
        while (flag) {
            System.out.println("run ... Thread " + i++);
        }
    }

    // è®¾ç½®ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•åœæ­¢çº¿ç¨‹ï¼Œè½¬æ¢æ ‡å¿—ä½
    public void stop() {
        this.flag = false;
    }

    public static void main(String[] args) {
        TestStop testStop = new TestStop();
        new Thread(testStop).start();

        for (int i = 0; i < 1000; i++) {
            System.out.println("main " + i);
            if (i==900) {
                testStop.stop();
                System.out.println("çº¿ç¨‹è¯¥åœæ­¢äº†");
            }
        }
    }
}
```



### çº¿ç¨‹ä¼‘çœ 

- sleepï¼ˆæ—¶é—´ï¼‰æŒ‡å®šå½“å‰çº¿ç¨‹é˜»å¡çš„æ¯«ç§’æ•°ï¼› 
- sleepå­˜åœ¨å¼‚å¸¸InterruptedExceptionï¼› 
- sleepæ—¶é—´è¾¾åˆ°åçº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼› 
- sleepå¯ä»¥æ¨¡æ‹Ÿç½‘ç»œå»¶æ—¶ï¼Œå€’è®¡æ—¶ç­‰ã€‚
- **æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”ï¼Œsleepä¸ä¼šé‡Šæ”¾é”**ï¼›





### çº¿ç¨‹ç¤¼è®©ï¼ˆæš‚åœï¼‰

- ç¤¼è®©çº¿ç¨‹ï¼Œè®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œä½†ä¸é˜»å¡
- å°†çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬ä¸ºå°±ç»ªçŠ¶æ€
- è®©CPUé‡æ–°è°ƒåº¦ï¼Œç¤¼è®©ä¸ä¸€å®šæˆåŠŸï¼Œçœ‹CPUå¿ƒæƒ…

```java
public class TestYield {
    public static void main(String[] args) {
        MyYield myYield = new MyYield();

        new Thread(myYield, "a").start();
        new Thread(myYield, "b").start();
    }

}

class MyYield implements Runnable {

    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName()+"çº¿ç¨‹å¼€å§‹è¿è¡Œ");
        Thread.yield();
        System.out.println(Thread.currentThread().getName()+"çº¿ç¨‹ç»“æŸè¿è¡Œ");
    }
}
```



### çº¿ç¨‹å¼ºåˆ¶æ‰§è¡ŒJoin

æ’é˜Ÿ

```java
public class TestJoin implements Runnable {
    @Override
    public void run() {
        for (int i = 0; i < 1000; i++) {
            System.out.println("vipçº¿ç¨‹æ¥äº†" + i);
        }
    }

    public static void main(String[] args) throws InterruptedException {
        // å¯åŠ¨çº¿ç¨‹
        TestJoin testJoin = new TestJoin();
        Thread thread = new Thread(testJoin);
        thread.start();

        // ä¸»çº¿ç¨‹
        for (int i = 0; i < 500; i++) {
            if (i==200) {
                thread.join(); //æ’é˜Ÿ
            }
            System.out.println("main" + i);
        }
    }
}
```

### çº¿ç¨‹çŠ¶æ€ç›‘æµ‹

`Thread.State`



### çº¿ç¨‹ä¼˜å…ˆçº§

- Javaæä¾›ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§ä¼˜å…ˆçº§å†³å®šåº”è¯¥è°ƒåº¦å“ªä¸ªçº¿ç¨‹æ¥æ‰§è¡Œã€‚

- çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ä»1~10ã€‚**æ•°å€¼å¤§å°ä¸ä»£è¡¨çº¿ç¨‹æ‰§è¡Œçš„å…ˆåé¡ºåºï¼Œåªè¡¨ç¤ºè¢«CPUæ‰§è¡Œå‡ ç‡å¤§å°ã€‚**

  ```java
  Thread.MIN_PRIORITY = 1;
  Thread.MAX_PRIORITY = 10;
  Thread.NORM_PRIORITY = 5;
  ```

- ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§

  ```java
  getPriority()
  setPriority(int xxx)
  ```

  

### å®ˆæŠ¤ï¼ˆdaemonï¼‰çº¿ç¨‹

- çº¿ç¨‹åˆ†ä¸º**ç”¨æˆ·çº¿ç¨‹**å’Œ**å®ˆæŠ¤çº¿ç¨‹**
- è™šæ‹Ÿæœºå¿…é¡»ç¡®ä¿ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
- è™šæ‹Ÿæœºä¸ç”¨ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
- å¦‚åå°è®°å½•æ“ä½œæ—¥å¿—ï¼Œç›‘æ§å†…å­˜ï¼Œåƒåœ¾å›æ”¶ç­‰å¾…..





## å››ã€çº¿ç¨‹åŒæ­¥ã€é‡ç‚¹ã€‘

å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªèµ„æº

å¹¶å‘ï¼šåŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œã€‚

å¤„ç†å¤šçº¿ç¨‹é—®é¢˜æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æŸäº›çº¿ç¨‹è¿˜æƒ³ä¿®æ”¹è¿™ä¸ªå¯¹è±¡.è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦çº¿ç¨‹åŒæ­¥.çº¿ç¨‹åŒæ­¥å…¶å®å°±æ˜¯ä¸€ç§**ç­‰å¾…æœºåˆ¶**ï¼Œå¤šä¸ªéœ€è¦åŒæ—¶è®¿é—®æ­¤å¯¹è±¡çš„çº¿ç¨‹è¿›å…¥è¿™ä¸ª**å¯¹è±¡çš„ç­‰å¾…æ± **å½¢æˆé˜Ÿåˆ—ï¼Œç­‰å¾…å‰é¢çº¿ç¨‹ä½¿ç”¨å®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†ä½¿ç”¨ã€‚

### é˜Ÿåˆ—å’Œé”

æ’é˜Ÿæ‰“é¥­

æ’é˜Ÿä¸Šå•æ‰€



å®‰å…¨  æ€§èƒ½

ç”±äºåŒä¸€è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å­˜å‚¨ç©ºé—´ï¼Œåœ¨å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†è®¿é—®å†²çªé—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ•°æ®åœ¨æ–¹æ³•ä¸­è¢«è®¿é—®æ—¶çš„æ­£ç¡®æ€§ï¼Œåœ¨è®¿é—®æ—¶åŠ å…¥**é”æœºåˆ¶synchronized**ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹è±¡çš„æ’å®ƒé”ï¼Œç‹¬å èµ„æºï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œä½¿ç”¨åé‡Šæ”¾é”å³å¯ã€‚å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ä¼šå¯¼è‡´å…¶ä»–æ‰€æœ‰éœ€è¦æ­¤é”çš„çº¿ç¨‹æŒ‚èµ·ï¼›
- åœ¨å¤šçº¿ç¨‹ç«äº‰ä¸‹ï¼ŒåŠ é”ï¼Œé‡Šæ”¾é”ä¼šå¯¼è‡´æ¯”è¾ƒå¤šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œè°ƒåº¦å»¶æ—¶ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜ï¼›
- å¦‚æœä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªä¼˜å…ˆçº§ä½çš„çº¿ç¨‹é‡Šæ”¾é”ä¼šå¯¼è‡´ä¼˜å…ˆçº§å€’ç½®ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜ï¼Œ

### 



### ä¸‰ä¸ªä¸å®‰å…¨çš„æ¡ˆä¾‹

  

### åŒæ­¥æ–¹æ³•

- ç”±äºæˆ‘ä»¬å¯ä»¥é€šè¿‡`private`å…³é”®å­—æ¥ä¿è¯æ•°æ®å¯¹è±¡åªèƒ½è¢«æ–¹æ³•è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ–¹æ³•æå‡ºä¸€å¥—æœºåˆ¶ï¼Œè¿™å¥—æœºåˆ¶å°±æ˜¯`synchronized`å…³é”®å­—ï¼Œå®ƒåŒ…æ‹¬ä¸¤ç§ç”¨æ³•ï¼š**synchronizedæ–¹æ³•**å’Œ**synchronizedå—**.

  > åŒæ­¥æ–¹æ³•ï¼špublic synchronized void methodï¼ˆint argsï¼‰{}

- synchronizedæ–¹æ³•æ§åˆ¶å¯¹â€œå¯¹è±¡â€çš„è®¿é—®ï¼Œæ¯ä¸ªå¯¹è±¡å¯¹åº”ä¸€æŠŠé”ï¼Œæ¯ä¸ªsynchronizedæ–¹æ³•éƒ½å¿…é¡»è·å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡çš„é”æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™çº¿ç¨‹ä¼šé˜»å¡ï¼Œæ–¹æ³•ä¸€æ—¦æ‰§è¡Œï¼Œå°±ç‹¬å è¯¥é”ï¼Œç›´åˆ°è¯¥æ–¹æ³•è¿”å›æ‰é‡Šæ”¾é”ï¼Œåé¢è¢«é˜»å¡çš„çº¿ç¨‹æ‰èƒ½è·å¾—è¿™ä¸ªé”ï¼Œç»§ç»­æ‰§è¡Œã€‚

  > ç¼ºé™·ï¼šè‹¥å°†ä¸€ä¸ªå¤§çš„æ–¹æ³•ç”³æ˜ä¸ºsynchronizedå°†ä¼šå½±å“æ•ˆç‡

### åŒæ­¥å—  

```
synchronized(Obj){}
```



ğŸ”–p20





## äº”ã€çº¿ç¨‹é€šä¿¡é—®é¢˜

çº¿ç¨‹æ± 
